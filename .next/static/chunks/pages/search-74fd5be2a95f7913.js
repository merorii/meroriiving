(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(7415)}])},3140:function(e,t,n){"use strict";n.d(t,{It:function(){return r},qF:function(){return c}});var a=n(8945);let r=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{data:n}=await a.Z.get("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat("30d18357fffa4ad0a9ba91c89e3b5679","&language=KO&page=").concat(t));return n},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{data:n}=await a.Z.get("https://api.themoviedb.org/3/search/movie?api_key=".concat("30d18357fffa4ad0a9ba91c89e3b5679","&language=KO&query=").concat(e,"&page=").concat(t||1));return n}},6536:function(e,t,n){"use strict";n.d(t,{F:function(){return r},S:function(){return u}});var a=n(8767);let r=(e,t)=>{let{data:n,fetchNextPage:r,hasNextPage:c=!0}=(0,a.useInfiniteQuery)(["searchDatas"],async n=>{let{pageParam:a}=n,r=await e(t,a||1);return{data:r.results,total:r.total_pages,page:r.page}},{getNextPageParam:e=>{if(e.total>e.page)return e.page+1},refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1});return{data:n,fetchNextPage:r,hasNextPage:c}};var c=n(7294);function u(e){let{target:t,onIntersect:n,root:a=null,rootMargin:r="0px",threshold:u=1}=e;(0,c.useEffect)(()=>{let e;return t&&t.current&&(e=new IntersectionObserver(n,{root:a,rootMargin:r,threshold:u})).observe(t.current),()=>e&&e.disconnect()},[t,r,u,n,a])}},7415:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return o}});var a=n(5893),r=n(7294),c=n(699),u=n(6536),i=n(3140);let s=e=>{let{result:t,keyword:n}=e,{data:s,fetchNextPage:o}=(0,u.F)(i.qF,n),l=(0,r.useRef)(null),f=e=>{let[t]=e;return t.isIntersecting&&o()};return(0,u.S)({target:l,onIntersect:f}),(0,a.jsx)(c.Zn,{children:(0,a.jsxs)("section",{className:"search-section",children:[(0,a.jsxs)("p",{children:['"',n,'" 검색 결과가 ',(null==t?void 0:t.total_results)||0,"개 있습니다."]}),(0,a.jsx)(c.CS,{data:(null==s?void 0:s.pages.map(e=>e.data).flat())||[]}),(0,a.jsx)("div",{ref:l})]})})};var o=!0;t.default=s}},function(e){e.O(0,[791,945,699,774,888,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);